// ------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version: 16.0.0.0
//  
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
// ------------------------------------------------------------------------------
namespace Cephei.Gen
{
    using System.IO;
    using System.Text;
    using System.Collections.Generic;
    using System.Diagnostics;
    using Cephei.Gen.Model;
    using System;
    
    /// <summary>
    /// Class to produce the template output
    /// </summary>
    
    #line 1 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public partial class Source : SourceBase
    {
#line hidden
        /// <summary>
        /// Create the template output
        /// </summary>
        public virtual string TransformText()
        {
            
            #line 1 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
/*  
Name:           Hpp.tt
Author:         Stephen Channell
Description:    Generate a single Interface for the Class
*/
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 19 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
    
    Context.ElementName = ElementName;
    Context.RootName = RootPackageName;
    Context.Prefix = "I";
    Context.Suffix = "^";
    Context.ClassDelimiter = "::";
    string NameSpace = "Cephei::" + Context.CurrentClass.GetNamespace ("::");
    string FullClassName = NameSpace + "::C" + Context.CurrentClass.Name;
    string FullCellClassName = NameSpace + "::CCell" + Context.CurrentClass.Name;

            
            #line default
            #line hidden
            this.Write(@"//
// Copyright (C) 2011 - 2016  Steve Channell steve.channell@cepheis.com
//
// This file is part of Cephei.QL, an open-source library wrapper 
// arround QuantLib http://quantlib.org/
//
// Cephei.QL is open source software: you can redistribute it and/or modify it
// under the terms of the license.  You should have received a
// copy of the license along with this program; if not, please email
// <support@cepheis.com>. The license is also available online at
// <http://cepheis.com/license.htm>.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
// FOR A PARTICULAR PURPOSE.  See the license for more details.
//
// Version 2.3 with QuantLib 1.2.1
//#include ""stdafx.h""
#include """);
            
            #line 48 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(".h\"\r\nusing namespace ");
            
            #line 49 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.GetNamespace ("::")));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 50 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    if (Context.CurrentClass.FileName == "") return "";
    foreach (var pair in Context.CurrentClass.ReferencedClasses)
    {
        if (pair.Value.Name != Context.CurrentClass.Name && !pair.Value.IsSpec)
        {

            
            #line default
            #line hidden
            this.Write("#include <gen/");
            
            #line 57 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetNamespace ("/").Replace("Cephei", "") + "/" + pair.Value.Name + ".h"));
            
            #line default
            #line hidden
            this.Write(">\r\n");
            
            #line 58 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

        }
    }

    foreach (KeyValuePair<int,Package> pair in Context.CurrentClass.ReferencedPackages)
    {

            
            #line default
            #line hidden
            this.Write("using namespace ");
            
            #line 65 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GlobalName));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 66 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    }

            
            #line default
            #line hidden
            this.Write("#");
            
            #line 69 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.IsObservable () ? "define" : "undef")));
            
            #line default
            #line hidden
            this.Write(" HANDLE\r\n#");
            
            #line 70 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.IsAbstract ? "define" : "undef")));
            
            #line default
            #line hidden
            this.Write(" ABSTRACT\r\n#");
            
            #line 71 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.IsStruct && !Context.CurrentClass.IsAbstract ? "define" : "undef")));
            
            #line default
            #line hidden
            this.Write(" STRUCT\r\n");
            
            #line 72 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
    foreach (Method method in Context.CurrentClass.Methods)
    {
        if (method.Name == Context.CurrentClass.Name && Context.Included2 (method, true) && !Context.CurrentClass.IsAbstract)
        {

            
            #line default
            #line hidden
            this.Write("    \r\n");
            
            #line 78 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 78 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 78 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamConstructor (true, "I", "^", "::")));
            
            #line default
            #line hidden
            this.Write(") ");
            
            #line 78 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n");
            
            #line 80 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            foreach (KeyValuePair<int,Parameter> pair in method.Parameters)
            {
                if (pair.Value.ParameterType.CollectionType != "")
                {

            
            #line default
            #line hidden
            
            #line 86 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

                }
                else if (pair.Value.ParameterType.Feature == CTSType.FeatureType.Object)
                {
                    Debug.Print ("! {0}", pair.Value.Name);

            
            #line default
            #line hidden
            this.Write("    C");
            
            #line 92 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^ _C");
            
            #line 92 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 93 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("    try\r\n    {\r\n#ifdef HANDLE\r\n        _ph");
            
            #line 100 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n");
            
            #line 102 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
            foreach (KeyValuePair<int,Parameter> pair in method.Parameters)
            {
                switch (pair.Value.ParameterType.Feature)
                {
                    case CTSType.FeatureType.Enum :
/* CPICashFlow fails with this code because Class is null when item is an enum
                        if (pair.Value.ParameterType.CollectionType == "") 
                        {
                            string refFunc = pair.Value.ParameterType.CollectionCallingFunction;

            
            #line default
            #line hidden
            this.Write(" \r\n        _C");
            
            #line 113 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 113 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (");
            
            #line 113 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        _c_");
            
            #line 114 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = _C");
            
            #line 114 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        ");
            
            #line 115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_C");
            
            #line 115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write("); \r\n");
            
            #line 116 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }                    
                        else*/ if (pair.Value.Default == "")
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 121 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 121 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = (");
            
            #line 121 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")");
            
            #line 121 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" ;\r\n");
            
            #line 122 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {
                            string enumname = pair.Value.Default;
                            if (enumname.Contains ("::"))
                            {
                                enumname = enumname.Substring(enumname.IndexOf("::") +2);
                            }
                            if (pair.Value.ParameterType.isOptional)
                            {

            
            #line default
            #line hidden
            this.Write("        boost::optional<");
            
            #line 134 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> _");
            
            #line 134 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        if (");
            
            #line 135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedType (true, "::", "I", "")));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            ");
            
            #line 137 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" t = (");
            
            #line 137 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")");
            
            #line 137 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value;\r\n            _");
            
            #line 138 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = boost::optional<");
            
            #line 138 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (t);\r\n        }\r\n        else\r\n            _");
            
            #line 141 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 141 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Default));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 142 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                            else
                            {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 147 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 147 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedType (true, "::", "I", "")));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? (");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value : ");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("::");
            
            #line 148 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(enumname));
            
            #line default
            #line hidden
            this.Write("); //10\r\n");
            
            #line 149 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                        }
                    break;
                    case CTSType.FeatureType.Object :
                        try
                        {
                            if (pair.Value.ParameterType.CollectionType == "") 
                            {
                                string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                                if (pair.Value.Default == "")
                                {

            
            #line default
            #line hidden
            this.Write("        _C");
            
            #line 162 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 162 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (");
            
            #line 162 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        _c_");
            
            #line 163 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = _C");
            
            #line 163 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        ");
            
            #line 164 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 164 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 164 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_C");
            
            #line 164 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 164 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write("); \r\n");
            
            #line 165 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                                }
                                else
                                {
                                    string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                                    qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        if (");
            
            #line 172 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 172 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            _C");
            
            #line 174 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 174 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (");
            
            #line 174 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value);\r\n            _c_");
            
            #line 175 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = _C");
            
            #line 175 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        }\r\n        ");
            
            #line 177 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 177 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_C");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //1\r\n");
            
            #line 179 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                                }
                            }
                            else
                            {
                                string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                                string refFeature = pair.Value.ParameterType.CollectionFeature;
                                if (pair.Value.Default == "")
                                {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 189 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 189 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 189 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->getFeature (");
            
            #line 189 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n        C");
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 190 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        _c_");
            
            #line 191 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 191 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        ");
            
            #line 192 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 192 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 192 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 192 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 192 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 193 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                                }
                                else
                                {
                                    string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                                    qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        C");
            
            #line 200 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 200 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 200 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        if (");
            
            #line 201 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 201 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            _c_");
            
            #line 203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value;\r\n            ");
            
            #line 204 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 204 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 204 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value->getFeature (");
            
            #line 204 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n            _NC");
            
            #line 205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        }\r\n        ");
            
            #line 207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 208 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write(");//2\r\n");
            
            #line 209 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                                }
                            }
                        }
                        catch (Exception e)
                        {
                            Console.WriteLine ("** ERROR ** class " + Context.CurrentClass.Name + " has invalid parameter " + pair.Value.Name );
                            Console.WriteLine ("\t>> " + e.Message );
                        }
                    break;
                default :       // value types
                    if (pair.Value.ParameterType.CollectionType != "")
                    {
                        string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                        string refFeature = pair.Value.ParameterType.CollectionFeature;
                        if (pair.Value.Default == "")
                        {

            
            #line default
            #line hidden
            this.Write("        _c_");
            
            #line 227 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 227 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        ");
            
            #line 228 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 228 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 228 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->getFeature (");
            
            #line 228 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n        C");
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 229 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        ");
            
            #line 230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 231 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {
                            string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                            qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        C");
            
            #line 238 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 238 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 238 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        if (");
            
            #line 239 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 239 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            _c_");
            
            #line 241 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 241 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value;\r\n            ");
            
            #line 242 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 242 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 242 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value->getFeature (");
            
            #line 242 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n            _NC");
            
            #line 243 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 243 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 243 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 243 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        }\r\n        ");
            
            #line 245 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 245 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //3\r\n");
            
            #line 247 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    }
                    else
                    {
                        if (pair.Value.Default == "" && !pair.Value.ParameterType.isOptional)
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 255 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 255 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = (");
            
            #line 255 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")ValueHelper::Convert (");
            
            #line 255 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("); //d\r\n");
            
            #line 256 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else if (pair.Value.ParameterType.isOptional)
                        {                                    
                            string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                            qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 263 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 263 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        if (");
            
            #line 264 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 264 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            _");
            
            #line 266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" (ValueHelper::Convert (");
            
            #line 266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value)); //e\r\n        }\r\n        else\r\n            _");
            
            #line 269 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 269 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Default));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 270 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {
                            string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                            qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 277 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 277 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 278 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 278 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? (");
            
            #line 278 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")ValueHelper::Convert (");
            
            #line 278 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value) : ");
            
            #line 278 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //4\r\n");
            
            #line 279 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    }
                    break;    
                }
            }

            
            #line default
            #line hidden
            this.Write("        _pp");
            
            #line 286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = new boost::shared_ptr<QuantLib::");
            
            #line 286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (new QuantLib::");
            
            #line 286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamString(false, "_", "", "::")));
            
            #line default
            #line hidden
            this.Write(" ));\r\n");
            
            #line 287 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            Parameter priceParameter = Context.CurrentClass.PricingParameter ();
            if (priceParameter != null)
            {
                string priceFunc = (priceParameter.ParameterType.Value.Contains ("Engine") ? "setPricingEngine" : "setPricer");
                if (priceParameter.ParameterType.Class == null) 
                {
                    Console.Write ("!!ERROR!! " + Context.CurrentClass.Name + " price parameter " + priceParameter.Name );
                    Debugger.Break ();
                }

            
            #line default
            #line hidden
            this.Write("        C");
            
            #line 298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(priceParameter.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^ _CQL_Pricer = safe_cast<C");
            
            #line 298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(priceParameter.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (QL_Pricer);\r\n\t\t_c_QL_Pricer = safe_cast<Cephei::QL::IPricingEngine^> (_CQL_Pr" +
                    "icer);\r\n        ");
            
            #line 300 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(priceParameter.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _QL_Pricer = static_cast<");
            
            #line 300 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(priceParameter.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_CQL_Pricer->GetShared ());\r\n        (*_pp");
            
            #line 301 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(")->");
            
            #line 301 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(priceFunc));
            
            #line default
            #line hidden
            this.Write(" (_QL_Pricer);\r\n");
            
            #line 302 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            }

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 305 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "Set" + Context.CurrentClass.ParentClass.Name + " (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n");
            
            #line 306 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
          if (Context.CurrentClass.IsLazyObject())
            {

            
            #line default
            #line hidden
            this.Write("\t\tboost::dynamic_pointer_cast<LazyObject> (*_pp");
            
            #line 309 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(")->recalculate (); // force calc to prevent race\r\n");
            
            #line 310 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
                
            }

            
            #line default
            #line hidden
            this.Write(@"	}
    catch (QuantLib::Error& _error)
    {
        if (_error.what())
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(_error.what()));
        else
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(""Unknown quantlib error""));
        
    }
	catch (std::exception& _error)
	{
        if (_error.what())
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(_error.what()));
        else
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(""Unknown std::exception""));
	}
}
");
            
            #line 330 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
        }
    }

            
            #line default
            #line hidden
            
            #line 334 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 334 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (boost::shared_ptr<QuantLib::");
            
            #line 334 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& childNative, Object^ owner) ");
            
            #line 334 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n#ifdef HANDLE\r\n\t_ph");
            
            #line 337 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n\t_pp");
            
            #line 339 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = &childNative;\r\n    ");
            
            #line 340 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n}\r\n");
            
            #line 342 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 342 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (QuantLib::");
            
            #line 342 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& childNative, Object^ owner) ");
            
            #line 342 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n#ifdef HANDLE\r\n\t_ph");
            
            #line 345 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n\t_pp");
            
            #line 347 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = new boost::shared_ptr<QuantLib::");
            
            #line 347 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (&childNative);\r\n    ");
            
            #line 348 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n    _");
            
            #line 349 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Owner = owner;\r\n    ");
            
            #line 350 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_" + Context.CurrentClass.ParentClass.Name + "Owner = owner;" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n}\r\n\r\n");
            
            #line 353 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 353 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (C");
            
            #line 353 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^ copy) ");
            
            #line 353 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n#ifdef HANDLE\r\n\t_ph");
            
            #line 356 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n\tif (copy->HasNative() != NULL)\r\n    {\r\n\t\t_pp");
            
            #line 360 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = new boost::shared_ptr<QuantLib::");
            
            #line 360 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (copy->GetShared());\r\n        ");
            
            #line 361 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n    }\r\n}\r\n");
            
            #line 364 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 364 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (PLATFORM::Type^ t) ");
            
            #line 364 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n#ifdef HANDLE\r\n\t_ph");
            
            #line 367 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n\tif (!t->IsSubclassOf(C");
            
            #line 369 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("::typeid))\r\n\t\tthrow REFNEW Exception (\"Invalid base-case init\");\r\n}\r\n#ifdef HANDL" +
                    "E\r\n");
            
            #line 373 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 373 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (QuantLib::Handle<QuantLib::");
            
            #line 373 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& childNative, Object^ owner)  ");
            
            #line 373 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n\t_ph");
            
            #line 375 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = &childNative;\r\n\t_pp");
            
            #line 376 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = &static_cast<boost::shared_ptr<QuantLib::");
            
            #line 376 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>(childNative.currentLink());\r\n    ");
            
            #line 377 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n    _");
            
            #line 378 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Owner = owner;\r\n}\r\n");
            
            #line 380 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 380 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (QuantLib::Handle<QuantLib::");
            
            #line 380 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> childNative)  ");
            
            #line 380 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n\t_ph");
            
            #line 382 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = &childNative;\r\n\t_pp");
            
            #line 383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = &static_cast<boost::shared_ptr<QuantLib::");
            
            #line 383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>(childNative.currentLink());\r\n    ");
            
            #line 384 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n}\r\n#endif\r\n#ifdef STRUCT\r\n");
            
            #line 388 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 388 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (QuantLib::");
            
            #line 388 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" childNative)  ");
            
            #line 388 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? ": C" + Context.CurrentClass.ParentClass.Name + "(C" + Context.CurrentClass.Name + "::typeid)" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n{\r\n#ifdef HANDLE\r\n\t_ph");
            
            #line 391 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n#endif\r\n\t_pp");
            
            #line 393 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = new boost::shared_ptr<QuantLib::");
            
            #line 393 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (new QuantLib::");
            
            #line 393 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (childNative));\r\n    ");
            
            #line 394 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((Context.CurrentClass.ParentClass != null ? "_pp" + Context.CurrentClass.ParentClass.Name + " = new boost::shared_ptr<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (boost::dynamic_pointer_cast<QuantLib::" + Context.CurrentClass.ParentClass.Name + "> (*_pp" + Context.CurrentClass.Name + "));" : "")));
            
            #line default
            #line hidden
            this.Write("\r\n}\r\n#endif\r\n\r\n");
            
            #line 398 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::~C");
            
            #line 398 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" ()\r\n{\r\n    if (_pp");
            
            #line 400 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" != NULL)\r\n    {\r\n\t    delete _pp");
            
            #line 402 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        _pp");
            
            #line 403 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = NULL;\r\n        GC::SuppressFinalize (this);\r\n    }\r\n}\r\n");
            
            #line 407 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::!C");
            
            #line 407 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" ()\r\n{\r\n    if (_pp");
            
            #line 409 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" != NULL)\r\n    {\r\n\t    delete _pp");
            
            #line 411 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n    }\r\n}\r\nQuantLib::");
            
            #line 414 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& ");
            
            #line 414 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::GetReference ()\r\n{\r\n    if (_pp");
            
            #line 416 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" == NULL) throw REFNEW NativeNullException ();\r\n\treturn **_pp");
            
            #line 417 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n}\r\nboost::shared_ptr<QuantLib::");
            
            #line 419 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& ");
            
            #line 419 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::GetShared ()\r\n{\r\n    if (_pp");
            
            #line 421 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" == NULL) throw REFNEW NativeNullException ();\r\n\treturn *_pp");
            
            #line 422 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n}\r\nQuantLib::");
            
            #line 424 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("* ");
            
            #line 424 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::GetPointer ()\r\n{\r\n    if (_pp");
            
            #line 426 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" == NULL) throw REFNEW NativeNullException ();\r\n\treturn &**_pp");
            
            #line 427 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n}\r\n#ifdef HANDLE\r\nQuantLib::Handle<QuantLib::");
            
            #line 430 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& ");
            
            #line 430 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::GetHandle ()\r\n{\r\n\tif (_ph");
            
            #line 432 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" == NULL)\r\n\t{\r\n\t\t_ph");
            
            #line 434 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" = new Handle<QuantLib::");
            
            #line 434 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (*_pp");
            
            #line 434 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n\t}\r\n\treturn *_ph");
            
            #line 436 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n}\r\n#endif\r\nbool ");
            
            #line 439 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::HasNative () \r\n{\r\n\treturn (_pp");
            
            #line 441 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" != NULL);\r\n}\r\n\r\n");
            
            #line 444 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
    foreach (Method method in Context.CurrentClass.Methods)
    {
        if (Context.CurrentClass.Name != method.Name && Context.Included2 (method, false) && !method.Name.StartsWith("operator") && !method.Name.StartsWith("~"))
        {
            string returnType = (method.ReturnType.Source == "void" ? Context.CurrentClass.GetNamespace("::") + "::I" + Context.CurrentClass.Name + "^" : method.ReturnType.GetQualifiedType (false,"::", "I", "^"));
            bool IsVoid = (method.ReturnType.Source == "void");
            if (method.Parameters.Count > 0 || !method.IsNameUnique)
            {

            
            #line default
            #line hidden
            this.Write("    \r\n");
            
            #line 454 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(returnType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 454 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::");
            
            #line 454 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.UpperName));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 454 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamString(true, "I", "^", "::")));
            
            #line default
            #line hidden
            this.Write(")\r\n{\r\n\tScopedInterfaceMutex scoped; \r\n");
            
            #line 457 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            }
            else
            {

            
            #line default
            #line hidden
            this.Write("    \r\n");
            
            #line 462 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(returnType));
            
            #line default
            #line hidden
            this.Write(" ");
            
            #line 462 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::");
            
            #line 462 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.UpperName));
            
            #line default
            #line hidden
            this.Write("::get ()\r\n{\r\n\tScopedInterfaceMutex scoped; \r\n");
            
            #line 465 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
          
            }
            foreach (KeyValuePair<int,Parameter> pair in method.Parameters)
            {
                if (pair.Value.ParameterType.CollectionType != "")
                {

            
            #line default
            #line hidden
            
            #line 472 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

                }
                else if (pair.Value.ParameterType.Feature == CTSType.FeatureType.Object)
                {

            
            #line default
            #line hidden
            this.Write("    C");
            
            #line 477 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^ _C");
            
            #line 477 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 478 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

                }
            }

            
            #line default
            #line hidden
            this.Write("    try\r\n    {\r\n");
            
            #line 484 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            foreach (KeyValuePair<int,Parameter> pair in method.Parameters)
            {
                switch (pair.Value.ParameterType.Feature)
                {
                    case CTSType.FeatureType.Enum :
                        if (pair.Value.Default == "")
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 493 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 493 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = (");
            
            #line 493 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")");
            
            #line 493 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" ;\r\n");
            
            #line 494 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 500 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedType (true, "::", "I", "")));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 500 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? (");
            
            #line 500 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")");
            
            #line 500 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value : QuantLib::");
            
            #line 500 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write(" ); //5\r\n");
            
            #line 501 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    break;
                    case CTSType.FeatureType.Object :
                        if (pair.Value.ParameterType.CollectionType == "")
                        {
                            string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                            if (pair.Value.Default == "")
                            {

            
            #line default
            #line hidden
            this.Write("        _C");
            
            #line 511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (");
            
            #line 511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        ");
            
            #line 512 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 512 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 512 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_C");
            
            #line 512 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 512 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write("); \r\n");
            
            #line 513 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                            else
                            {
                                string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                                qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        if (");
            
            #line 520 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 520 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            _C");
            
            #line 522 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 522 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Class.Name));
            
            #line default
            #line hidden
            this.Write("^> (");
            
            #line 522 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value);\r\n        }\r\n        ");
            
            #line 524 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 524 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_C");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 525 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //6\r\n");
            
            #line 526 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                        }
                        else
                        {
                            string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                            string refFeature = pair.Value.ParameterType.CollectionFeature;
                            if (pair.Value.Default == "")
                            {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 536 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 536 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 536 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->getFeature (");
            
            #line 536 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n        C");
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 537 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        ");
            
            #line 538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 539 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 

                            }
                            else
                            {
                                string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                                qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 547 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 547 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value->");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 548 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //7\r\n");
            
            #line 549 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                        }
                    break;
                default :
                    if (pair.Value.ParameterType.CollectionType != "")
                    {
                        string refFunc = pair.Value.ParameterType.CollectionCallingFunction;
                        string refFeature = pair.Value.ParameterType.CollectionFeature;
                        if (pair.Value.Default == "")
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 561 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 561 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 561 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->getFeature (");
            
            #line 561 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n        C");
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 562 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        ");
            
            #line 563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = static_cast<");
            
            #line 563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(");\r\n");
            
            #line 564 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {
                            string qualtype = pair.Value.GetQualifiedType (true, "::", "I", "^");
                            qualtype = qualtype.Substring (0, qualtype.Length-1);

            
            #line default
            #line hidden
            this.Write("        C");
            
            #line 571 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 571 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^ _NC");
            
            #line 571 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n        if (");
            
            #line 572 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 572 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("))\r\n        {\r\n            ");
            
            #line 574 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetCppType("INative", "I")));
            
            #line default
            #line hidden
            this.Write("^ _NCI");
            
            #line 574 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = ");
            
            #line 574 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value->getFeature (");
            
            #line 574 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFeature));
            
            #line default
            #line hidden
            this.Write(");\r\n            _NC");
            
            #line 575 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = safe_cast<C");
            
            #line 575 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.Value));
            
            #line default
            #line hidden
            
            #line 575 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.CollectionType));
            
            #line default
            #line hidden
            this.Write("^>(_NCI");
            
            #line 575 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(");\r\n        }\r\n        ");
            
            #line 577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(qualtype));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? static_cast<");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("> (_NC");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(refFunc));
            
            #line default
            #line hidden
            this.Write(") : ");
            
            #line 578 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //8\r\n");
            
            #line 579 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    }
                    else
                    {
                        if (pair.Value.Default == "" && !pair.Value.ParameterType.isOptional && pair.Value.ParameterType.Source != "double*" && pair.Value.ParameterType.Source != "QuantLib::Real*")
                        {                          

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 587 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 587 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = (");
            
            #line 587 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")ValueHelper::Convert (");
            
            #line 587 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("); //a\r\n");
            
            #line 588 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else if (pair.Value.Default == "" && !pair.Value.ParameterType.isOptional)
                        {                          

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 593 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 593 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = &");
            
            #line 593 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(";\r\n");
            
            #line 594 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else if (pair.Value.ParameterType.isOptional)
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 599 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 599 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 600 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedType (true, "::", "I", "").Replace("String", "String^")));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 600 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? ");
            
            #line 600 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" (ValueHelper::Convert (");
            
            #line 600 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value)) : ");
            
            #line 600 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write("()); //9\r\n");
            
            #line 601 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 606 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _");
            
            #line 606 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(" = \r\n            (");
            
            #line 607 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedType (true, "::", "I", "").Replace("String", "String^")));
            
            #line default
            #line hidden
            this.Write("::IsSome::get (");
            
            #line 607 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write(") ? (");
            
            #line 607 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.ParameterType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")ValueHelper::Convert (");
            
            #line 607 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.Name));
            
            #line default
            #line hidden
            this.Write("->Value) : ");
            
            #line 607 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(pair.Value.GetQualifiedDefault()));
            
            #line default
            #line hidden
            this.Write("); //9a\r\n");
            
            #line 608 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    }
                    break;    
                }
            }

            if (method.ReturnType.Source == "void")
            {

            
            #line default
            #line hidden
            this.Write("    \t(*_pp");
            
            #line 618 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(")->");
            
            #line 618 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.Name));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 618 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamString(false, "_", "", "::")));
            
            #line default
            #line hidden
            this.Write(" );\r\n");
            
            #line 619 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
            }
            else
            {

            
            #line default
            #line hidden
            this.Write("    \t");
            
            #line 624 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(" _rv = (");
            
            #line 624 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedSource ("QuantLib::")));
            
            #line default
            #line hidden
            this.Write(")(*_pp");
            
            #line 624 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(")->");
            
            #line 624 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.Name.Replace("p_", "")));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 624 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamString(false, "_", "", "::")));
            
            #line default
            #line hidden
            this.Write(" );   \r\n");
            
            #line 625 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 

                switch (method.ReturnType.Feature)
                {
                    case CTSType.FeatureType.Enum :

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 631 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false, "::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(" _nrv = (");
            
            #line 631 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Value));
            
            #line default
            #line hidden
            this.Write(")_rv;\r\n");
            
            #line 632 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                    break;
                    case CTSType.FeatureType.Object :
                        if (method.ReturnType.CollectionType == "")
                        {
                            string refFunc = method.ReturnType.CollectionCallingFunction;
                            if (method.ReturnType.Calling == CTSType.CallingType.Value)
                            {

            
            #line default
            #line hidden
            this.Write(" \r\n        ");
            
            #line 641 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.GetNamespace ("::") + "::C" + method.ReturnType.Value));
            
            #line default
            #line hidden
            this.Write("^ _nrv = REFNEW ");
            
            #line 641 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.GetNamespace ("::") + "::C" + method.ReturnType.Value));
            
            #line default
            #line hidden
            this.Write(" (_rv);\r\n");
            
            #line 642 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                            else
                            {

            
            #line default
            #line hidden
            this.Write(" \r\n        ");
            
            #line 647 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.GetNamespace ("::") + "::C" + method.ReturnType.Value));
            
            #line default
            #line hidden
            this.Write("^ _nrv = REFNEW ");
            
            #line 647 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.GetNamespace ("::") + "::C" + method.ReturnType.Value));
            
            #line default
            #line hidden
            this.Write(" (_rv, this);\r\n");
            
            #line 648 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                        }
                        else
                        {
                            string refFunc = method.ReturnType.CollectionCallingFunction;
                            if (method.ReturnType.Calling == CTSType.CallingType.Value)
                            {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 657 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetCppType ("Co", "I")));
            
            #line default
            #line hidden
            this.Write("^ _nrv = REFNEW ");
            
            #line 657 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetCppType ("Co","I")));
            
            #line default
            #line hidden
            this.Write("(REFNEW C");
            
            #line 657 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.Name + method.ReturnType.CollectionType));
            
            #line default
            #line hidden
            this.Write(" (_rv));\r\n");
            
            #line 658 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                            else
                            {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 663 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetCppType ("Co", "I")));
            
            #line default
            #line hidden
            this.Write("^ _nrv = REFNEW ");
            
            #line 663 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetCppType ("Co","I")));
            
            #line default
            #line hidden
            this.Write("(REFNEW C");
            
            #line 663 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Class.Name + method.ReturnType.CollectionType));
            
            #line default
            #line hidden
            this.Write(" (_rv, this));\r\n");
            
            #line 664 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                            }
                        }
                    break;
                default : //value
                    if (method.ReturnType.CollectionType != "")
                    {
                        string refFunc = method.ReturnType.CollectionCallingFunction;

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 673 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false, "::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(" _nrv = REFNEW Co");
            
            #line 673 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.CollectionType));
            
            #line default
            #line hidden
            this.Write("<");
            
            #line 673 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((method.ReturnType.Value != "String" ? method.ReturnType.Value : "String^")));
            
            #line default
            #line hidden
            this.Write("> (REFNEW C");
            
            #line 673 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.Value + method.ReturnType.CollectionType));
            
            #line default
            #line hidden
            this.Write(" (_rv));\r\n");
            
            #line 674 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                    }
                    else
                    {
                        if (method.ReturnType.isOptional)
                        {

            
            #line default
            #line hidden
            this.Write("\t\t");
            
            #line 681 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(" _nrv;\r\n\t\tif (_rv.is_initialized())\r\n\t\t\t_nrv = ");
            
            #line 683 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "")));
            
            #line default
            #line hidden
            this.Write("::Some (ValueHelper::Convert(_rv.value()));\r\n\t\telse\r\n\t\t\t_nrv = ");
            
            #line 685 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "")));
            
            #line default
            #line hidden
            this.Write("::None; //b\r\n");
            
            #line 686 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else if (method.ReturnType.Value != "UInt64")
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 691 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(" _nrv = (");
            
            #line 691 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(")ValueHelper::Convert (_rv); //c\r\n");
            
            #line 692 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                        else
                        {

            
            #line default
            #line hidden
            this.Write("        ");
            
            #line 697 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.ReturnType.GetQualifiedType (false,"::", "I", "^")));
            
            #line default
            #line hidden
            this.Write(" _nrv = _rv; //c1\r\n");
            
            #line 698 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
                        }
                    }
                    break;    
                }
            }

            
            #line default
            #line hidden
            this.Write("    \treturn ");
            
            #line 705 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture((IsVoid ? "this" : "_nrv")));
            
            #line default
            #line hidden
            this.Write(@";
	}
    catch (QuantLib::Error& _error)
    {
        if (_error.what())
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(_error.what()));
        else
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(""Unknown quantlib error""));
        
    }
	catch (std::exception& _error)
	{
        if (_error.what())
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(_error.what()));
        else
		    throw REFNEW NativeExcpetion (REFNEW PLATFORM::String(""Unknown std::exception""));
	}
}
");
            
            #line 723 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
        }
    }
    foreach (var c in Context.CurrentClass.AllClassCasts)
    {

            
            #line default
            #line hidden
            this.Write("#include <gen/");
            
            #line 729 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(c.GetNamespace ("/").Replace("Cephei", "") + "/" + c.Name + ".h"));
            
            #line default
            #line hidden
            this.Write(">\r\n");
            
            #line 730 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    }

            
            #line default
            #line hidden
            this.Write("generic<typename T> T ");
            
            #line 733 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(FullClassName));
            
            #line default
            #line hidden
            this.Write("::As ()\r\n{\r\n");
            
            #line 735 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    string IfStr = "if";
    foreach (var c in Context.CurrentClass.AllClassDownCasts)
    {

            
            #line default
            #line hidden
            this.Write("\t");
            
            #line 740 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(IfStr));
            
            #line default
            #line hidden
            this.Write(" (T::typeid == ");
            
            #line 740 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(c.GetNamespace ("::") + "::C" + c.Name));
            
            #line default
            #line hidden
            this.Write("::typeid)\r\n\t{\r\n\t\treturn reinterpret_cast<T>(REFNEW  ");
            
            #line 742 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(c.GetNamespace ("::") + "::C" + c.Name));
            
            #line default
            #line hidden
            this.Write(" (boost::dynamic_pointer_cast<QuantLib::");
            
            #line 742 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(c.Name));
            
            #line default
            #line hidden
            this.Write(">(this->GetShared()), nullptr));\r\n\t}\r\n");
            
            #line 744 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

        IfStr = "else if";
    }

            
            #line default
            #line hidden
            this.Write("    throw REFNEW InvalidCastException ();\r\n}\r\n");
            
            #line 750 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    if (Context.CurrentClass.Collections.Contains("Vector"))
    {

            
            #line default
            #line hidden
            
            #line 754 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 754 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::C");
            
            #line 754 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector ()\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif\r\n\t_pVBoost = NULL;\r\n#ifdef" +
                    " HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n}\r\n");
            
            #line 764 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 764 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::~C");
            
            #line 764 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n\t_pVValue =" +
                    " NULL;\r\n#endif   \r\n\tif (_pVBoost != NULL) delete _pVBoost;\r\n\t_pVBoost = NULL;\r\n#" +
                    "ifdef HANDLE\r\n\tif (_pVHand != NULL) delete _pVHand;\r\n\t_pVHand = NULL;\r\n#endif\r\n}" +
                    "\r\n");
            
            #line 777 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 777 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::!C");
            
            #line 777 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n#endif   \r\n" +
                    "\tif (_pVBoost != NULL) delete _pVBoost;\r\n#ifdef HANDLE\r\n\tif (_pVHand != NULL) de" +
                    "lete _pVHand;\r\n#endif\r\n}\r\n#ifdef STRUCT\r\n");
            
            #line 788 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 788 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::C");
            
            #line 788 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector (std::vector<QuantLib::");
            
            #line 788 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif\r\n\t_pVBoost = " +
                    "NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = &vec;\r\n\t_owner = own" +
                    "er;\r\n}\r\n");
            
            #line 800 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 800 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::C");
            
            #line 800 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector (std::vector<QuantLib::");
            
            #line 800 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> vec)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif\r\n\t_pVBoost = NULL;\r\n#ifdef HA" +
                    "NDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = new std::vector<QuantLib::");
            
            #line 809 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> (vec);\r\n}\r\n#endif\r\n");
            
            #line 812 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 812 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::C");
            
            #line 812 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector (std::vector<boost::shared_ptr<QuantLib::");
            
            #line 812 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif\r\n\t_pVBoost =" +
                    " NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t _pVBoost = &vec;\r\n\t_owner = o" +
                    "wner;\r\n}\r\n#ifdef HANDLE\r\n");
            
            #line 825 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 825 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::C");
            
            #line 825 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector (std::vector<QuantLib::Handle<QuantLib::");
            
            #line 825 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif\r\n\t_pVBoost =" +
                    " NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t _pVHand = &vec;\r\n\t_owner = ow" +
                    "ner;\r\n}\r\n#endif\r\n\r\nint ");
            
            #line 839 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 839 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"Vector::Count::get ()
{
#ifdef STRUCT
	if (_pVValue != NULL) 
	{
		return _pVValue->size();
	}
#endif    
	if (_pVBoost != NULL)
	{
		return _pVBoost->size ();
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		return _pVHand->size ();
	}
#endif
	return 0;		// should never happen
}
");
            
            #line 859 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 859 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^ ");
            
            #line 859 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 859 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::default::get (int index) \r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) \r\n\t{\r" +
                    "\n    \tif ((size_t)index >= _pVValue->size()) throw REFNEW RangeException ();\r\n\t\t" +
                    "QuantLib::");
            
            #line 865 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = (*_pVValue)[index];\r\n\t\treturn REFNEW C");
            
            #line 866 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif    \r\n\tif (_pVBoost != NULL)\r\n\t{\r\n    \tif ((size_t)in" +
                    "dex >= _pVBoost->size()) throw REFNEW RangeException ();\r\n\t\tQuantLib::");
            
            #line 872 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *(*_pVBoost)[index];\r\n\t\treturn REFNEW C");
            
            #line 873 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#ifdef HANDLE\r\n\tif (_pVHand != NULL)\r\n\t{\r\n    \tif ((size_t)" +
                    "index >= _pVHand->size()) throw REFNEW RangeException ();\r\n\t\tQuantLib::");
            
            #line 879 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *((*_pVHand)[index].currentLink ());\r\n\t\treturn REFNEW C");
            
            #line 880 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif\r\n\treturn nullptr;\t\t// can never be the case\r\n}\r\nvoid" +
                    " ");
            
            #line 885 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 885 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::default::set (int index, ");
            
            #line 885 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 885 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^ value) 
{
#ifdef STRUCT
	if (_pVValue != NULL)
	{
		if (_pVValue->size() <= (size_t)index)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVValue->size() < (size_t)index)
			{
				throw REFNEW RangeException ();
			}
			_pVValue->push_back (dynamic_cast<C");
            
            #line 897 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetReference ());\r\n\t\t}\r\n        else\r\n        {\r\n            QuantLib:" +
                    ":");
            
            #line 901 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& c = (*_pVValue)[index];\r\n            c = dynamic_cast<C");
            
            #line 902 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetReference ();
        }
	}
#endif   
	if (_pVBoost != NULL)
	{
		if (_pVBoost->size() <= (size_t)index)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVBoost->size() < (size_t)index)
			{
				throw REFNEW RangeException ();
			}
			_pVBoost->push_back (dynamic_cast<C");
            
            #line 915 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ());\r\n\t\t}\r\n\t\tboost::shared_ptr<QuantLib::");
            
            #line 917 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVBoost)[index];\r\n\t\tc = dynamic_cast<C");
            
            #line 918 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetShared ();
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		if (_pVHand->size() <= (size_t)index)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVHand->size() < (size_t)index)
			{
				throw REFNEW RangeException ();
			}
			_pVHand->push_back (QuantLib::Handle<QuantLib::");
            
            #line 930 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> ());\r\n\t\t}\r\n\t\tQuantLib::Handle<QuantLib::");
            
            #line 932 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVHand)[index];\r\n\t\tboost::shared_ptr<QuantLib::");
            
            #line 933 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& b = static_cast<boost::shared_ptr<QuantLib::");
            
            #line 933 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>(c.currentLink());\r\n\t\tb = dynamic_cast<C");
            
            #line 934 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ();\r\n\t}\r\n#endif\r\n}\r\nCephei::Core::Generic::ICoCell<");
            
            #line 938 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 938 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ ");
            
            #line 938 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 938 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::CItem::get (int index) \r\n{\r\n\treturn CellFactory::Instance->Create<I");
            
            #line 940 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^> (dynamic_cast<I");
            
            #line 940 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(default[index]));\r\n}\r\n\r\nvoid ");
            
            #line 943 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 943 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::CItem::set (int index, Cephei::Core::Generic::ICoCell<");
            
            #line 943 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 943 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ value) \r\n{\r\n\tdefault[index] = safe_cast<I");
            
            #line 945 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value->Value);\r\n}\r\n#ifdef STRUCT\r\nstd::vector<QuantLib::");
            
            #line 948 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& ");
            
            #line 948 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 948 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::GetReference ()\r\n{\r\n\t return *_pVValue;\r\n}\r\n#endif\r\n\r\nstd::vector<boost::" +
                    "shared_ptr<QuantLib::");
            
            #line 954 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& ");
            
            #line 954 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 954 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::GetShared ()\r\n{\r\n\treturn *_pVBoost;\r\n}\r\n\r\n#ifdef HANDLE\r\nstd::vector<Quan" +
                    "tLib::Handle<QuantLib::");
            
            #line 960 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& ");
            
            #line 960 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 960 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::GetHandle ()\r\n{\r\n\treturn *_pVHand;\r\n}\r\n#endif\r\nbool ");
            
            #line 965 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 965 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector::PrepareFeature (NativeFeature feature)\r\n{\r\n\tswitch (feature)\r\n\t{\r\n#ifdef " +
                    "STRUCT\r\n\t\tcase NativeFeature::Value :\r\n\t\t\tif (_pVValue == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVVa" +
                    "lue = new std::vector<QuantLib::");
            
            #line 973 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#endif\r\n        case NativeFeature::sha" +
                    "red_ptr :\r\n\t\t\tif (_pVBoost == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVBoost = new std::vector<boost:" +
                    ":shared_ptr<QuantLib::");
            
            #line 981 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#ifdef HANDLE\r\n        case NativeFeat" +
                    "ure::Handle :\r\n            if (_pVHand == NULL)\r\n            {\r\n                " +
                    "_pVHand = new std::vector<QuantLib::Handle<QuantLib::");
            
            #line 989 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> ();\r\n                return true;\r\n            }\r\n            break;\r\n#endif\r\n" +
                    "\t}\r\n\treturn false;\r\n}\r\n");
            
            #line 997 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    }
    if (Context.CurrentClass.Collections.Contains("Matrix"))
    {

            
            #line default
            #line hidden
            
            #line 1002 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1002 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::C");
            
            #line 1002 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix ()\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBoost = NULL;\r\n#i" +
                    "fdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n}\r\n#ifdef STRUCT\r\n");
            
            #line 1013 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1013 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::C");
            
            #line 1013 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix (std::vector<std::vector<QuantLib::");
            
            #line 1013 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBoo" +
                    "st = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = &vec;\r\n\t_owner " +
                    "= owner;\r\n}\r\n");
            
            #line 1025 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1025 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::C");
            
            #line 1025 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix (std::vector<std::vector<QuantLib::");
            
            #line 1025 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> vec)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBoost = NULL;\r\n#ifd" +
                    "ef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = new std::vector<std::vector<Qua" +
                    "ntLib::");
            
            #line 1034 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> (vec);\r\n}\r\n#endif\r\n");
            
            #line 1037 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1037 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::C");
            
            #line 1037 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix (std::vector<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1037 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBo" +
                    "ost = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVBoost = &vec;\r\n\t_owner" +
                    " = owner;\r\n}\r\n#ifdef HANDLE\r\n");
            
            #line 1050 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1050 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::C");
            
            #line 1050 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix (std::vector<std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1050 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBo" +
                    "ost = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVHand = &vec;\r\n\t_owner " +
                    "= owner;\r\n}\r\n#endif\r\n");
            
            #line 1063 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1063 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::~C");
            
            #line 1063 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n\t_pVValue =" +
                    " NULL;\r\n#endif   \r\n\tif (_pVBoost != NULL) delete _pVBoost;\r\n\t_pVBoost = NULL;\r\n#" +
                    "ifdef HANDLE\r\n\tif (_pVHand != NULL) delete _pVHand;\r\n\t_pVHand = NULL;\r\n#endif\r\n}" +
                    "\r\n");
            
            #line 1076 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1076 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::!C");
            
            #line 1076 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n\t_pVValue =" +
                    " NULL;\r\n#endif   \r\n\tif (_pVBoost != NULL) delete _pVBoost;\r\n\t_pVBoost = NULL;\r\n#" +
                    "ifdef HANDLE\r\n\tif (_pVHand != NULL) delete _pVHand;\r\n\t_pVHand = NULL;\r\n#endif\r\n}" +
                    "\r\nint ");
            
            #line 1089 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1089 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"Matrix::Count::get ()
{
#ifdef STRUCT
	if (_pVValue != NULL) 
	{
		return _pVValue->size();
	}
#endif    
	if (_pVBoost != NULL)
	{
		return _pVBoost->size ();
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		return _pVHand->size ();
	}
#endif
	return 0;		// should never happen
}
");
            
            #line 1109 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1109 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^ ");
            
            #line 1109 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1109 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::default::get (int x, int y) \r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) \r\n" +
                    "\t{\r\n\t\tif ((size_t)x >= _pVValue->size() || (size_t)y >= (*_pVValue)[x].size()) t" +
                    "hrow REFNEW RangeException ();\r\n\t\tQuantLib::");
            
            #line 1115 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = (*_pVValue)[x][y];\r\n\t\treturn REFNEW C");
            
            #line 1116 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif    \r\n\tif (_pVBoost != NULL)\r\n\t{\r\n\t\tif ((size_t)x >= " +
                    "_pVBoost->size() || (size_t)y >= (*_pVBoost)[x].size()) throw REFNEW RangeExcept" +
                    "ion ();\r\n\t\tQuantLib::");
            
            #line 1122 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *(*_pVBoost)[x][y];\r\n\t\treturn REFNEW C");
            
            #line 1123 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#ifdef HANDLE\r\n\tif (_pVHand != NULL)\r\n\t{\r\n\t\tif ((size_t)x >" +
                    "= _pVHand->size() || (size_t)y >= (*_pVHand)[x].size()) throw REFNEW RangeExcept" +
                    "ion ();\r\n\t\tQuantLib::");
            
            #line 1129 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *((*_pVHand)[x][y].currentLink ());\r\n\t\treturn REFNEW C");
            
            #line 1130 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif\r\n\treturn nullptr;\t\t// can never be the case\r\n}\r\nvoid" +
                    " ");
            
            #line 1135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::default::set (int x, int y, ");
            
            #line 1135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1135 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^ value) 
{
#ifdef STRUCT
	if (_pVValue != NULL)
	{
		if (_pVValue->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVValue->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVValue->push_back (std::vector<QuantLib::");
            
            #line 1145 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">());\r\n\t\t}\r\n\t\tif ((*_pVValue)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVValue)[x]" +
                    ".size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVValue)[x].push_b" +
                    "ack (dynamic_cast<C");
            
            #line 1151 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetReference ());\r\n\t\t}\r\n        else\r\n        {    \r\n            Quant" +
                    "Lib::");
            
            #line 1155 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& c = (*_pVValue)[x][y];\r\n            c = dynamic_cast<C");
            
            #line 1156 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetReference ();
        }
	}
#endif    
	if (_pVBoost != NULL)
	{
		if (_pVBoost->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVBoost->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVBoost->push_back (std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1167 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>());\r\n\t\t}\r\n\t\tif ((*_pVBoost)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVBoost)[x" +
                    "].size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVBoost)[x].push_" +
                    "back (dynamic_cast<C");
            
            #line 1173 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ());\r\n\t\t}\r\n        else\r\n        {\r\n            boost::share" +
                    "d_ptr<QuantLib::");
            
            #line 1177 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVBoost)[x][y];\r\n            c = dynamic_cast<C");
            
            #line 1178 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetShared ();
        }
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		if (_pVHand->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVHand->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVHand->push_back (std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1189 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>());\r\n\t\t}\r\n\t\tif ((*_pVHand)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVHand)[x]." +
                    "size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVHand)[x].push_bac" +
                    "k (QuantLib::Handle<QuantLib::");
            
            #line 1195 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> ());\r\n\t\t}\r\n\t\tQuantLib::Handle<QuantLib::");
            
            #line 1197 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVHand)[x][y];\r\n\t\tboost::shared_ptr<QuantLib::");
            
            #line 1198 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& b = static_cast<boost::shared_ptr<QuantLib::");
            
            #line 1198 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>(c.currentLink());\r\n\t\tb = dynamic_cast<C");
            
            #line 1199 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ();\r\n\t}\r\n#endif\r\n}\r\nCephei::Core::Generic::ICoCell<");
            
            #line 1203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ ");
            
            #line 1203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1203 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::CItem::get (int x, int y) \r\n{\r\n\treturn CellFactory::Instance->Create<");
            
            #line 1205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^> (dynamic_cast<I");
            
            #line 1205 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(default[x,y]));\r\n}\r\nvoid ");
            
            #line 1207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::CItem::set (int x, int y, Cephei::Core::Generic::ICoCell<");
            
            #line 1207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1207 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ value)\r\n{\r\n\tdefault[x,y] = safe_cast<I");
            
            #line 1209 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value->Value);\r\n}\r\n\r\n#ifdef STRUCT\r\nstd::vector<std::vector<QuantLib::");
            
            #line 1213 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>& ");
            
            #line 1213 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1213 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::GetReference ()\r\n{\r\n\t return *_pVValue;\r\n}\r\n#endif\r\n\r\nstd::vector<std::ve" +
                    "ctor<boost::shared_ptr<QuantLib::");
            
            #line 1219 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& ");
            
            #line 1219 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1219 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::GetShared ()\r\n{\r\n\treturn *_pVBoost;\r\n}\r\n\r\n#ifdef HANDLE\r\nstd::vector<std:" +
                    ":vector<QuantLib::Handle<QuantLib::");
            
            #line 1225 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& ");
            
            #line 1225 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1225 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::GetHandle ()\r\n{\r\n\treturn *_pVHand;\r\n}\r\n#endif\r\nbool ");
            
            #line 1230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1230 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::PrepareFeature (NativeFeature feature)\r\n{\r\n\tswitch (feature)\r\n\t{\r\n#ifdef " +
                    "STRUCT\r\n\t\tcase NativeFeature::Value :\r\n\t\t\tif (_pVValue == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVVa" +
                    "lue = new std::vector<std::vector<QuantLib::");
            
            #line 1238 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#endif            \r\n\t\tcase NativeFeatu" +
                    "re::shared_ptr :\r\n\t\t\tif (_pVBoost == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVBoost = new std::vector" +
                    "<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1246 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#ifdef HANDLE\r\n\t\tcase NativeFeature::" +
                    "Handle :\r\n\t\t\tif (_pVHand == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVHand = new std::vector<std::vect" +
                    "or<QuantLib::Handle<QuantLib::");
            
            #line 1254 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#endif\r\n\t}\r\n\treturn false;\r\n}\r\nINativ" +
                    "eVector<");
            
            #line 1262 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1262 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ ");
            
            #line 1262 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1262 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::CreateVector () \r\n{\r\n\treturn REFNEW C");
            
            #line 1264 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector ();\r\n}\r\nINativeVector<Cephei::Core::Generic::ICoCell<");
            
            #line 1266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^>^ ");
            
            #line 1266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1266 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix::CreateCellVector ()\r\n{\r\n\treturn REFNEW C");
            
            #line 1268 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Vector ();\r\n}\r\n");
            
            #line 1270 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    }
    if (Context.CurrentClass.Collections.Contains("Cube"))
    {

            
            #line default
            #line hidden
            
            #line 1275 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1275 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::C");
            
            #line 1275 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube ()\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBoost = NULL;\r\n#ifd" +
                    "ef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n}\r\n#ifdef STRUCT\r\n");
            
            #line 1286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::C");
            
            #line 1286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube (std::vector<std::vector<std::vector<QuantLib::");
            
            #line 1286 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBo" +
                    "ost = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = &vec;\r\n\t_owner" +
                    " = owner;\r\n}\r\n");
            
            #line 1298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::C");
            
            #line 1298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube (std::vector<std::vector<std::vector<QuantLib::");
            
            #line 1298 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>> vec)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVBoost = NULL;\r\n#if" +
                    "def HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVValue = new std::vector<std::vector<st" +
                    "d::vector<QuantLib::");
            
            #line 1307 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>> (vec);\r\n}\r\n#endif\r\n");
            
            #line 1310 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1310 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::C");
            
            #line 1310 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube (std::vector<std::vector<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1310 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVB" +
                    "oost = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVBoost = &vec;\r\n\t_owne" +
                    "r = owner;\r\n}\r\n#ifdef HANDLE\r\n");
            
            #line 1323 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1323 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::C");
            
            #line 1323 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube (std::vector<std::vector<std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1323 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>>& vec, Object^ owner)\r\n{\r\n#ifdef STRUCT\r\n\t_pVValue = NULL;\r\n#endif    \r\n\t_pVB" +
                    "oost = NULL;\r\n#ifdef HANDLE\r\n\t_pVHand = NULL;\r\n#endif\r\n\t_pVHand = &vec;\r\n\t_owner" +
                    " = owner;\r\n}\r\n#endif\r\n\r\n");
            
            #line 1337 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1337 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::~C");
            
            #line 1337 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n\t_pVValue = N" +
                    "ULL;\r\n#endif    \r\n\tif (_pVBoost != NULL) delete _pVBoost;\r\n\t_pVBoost = NULL;\r\n#i" +
                    "fdef HANDLE\r\n\tif (_pVHand != NULL) delete _pVHand;\r\n\t_pVHand = NULL;\r\n#endif\r\n}\r" +
                    "\n");
            
            #line 1350 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1350 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::!C");
            
            #line 1350 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube ()\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL) delete _pVValue;\r\n\t_pVValue = N" +
                    "ULL;\r\n#endif    \r\n\tif (_pVBoost != NULL) delete _pVBoost;\r\n\t_pVBoost = NULL;\r\n#i" +
                    "fdef HANDLE\r\n\tif (_pVHand != NULL) delete _pVHand;\r\n\t_pVHand = NULL;\r\n#endif\r\n}\r" +
                    "\nint ");
            
            #line 1363 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1363 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"Cube::Count::get ()
{
#ifdef STRUCT
	if (_pVValue != NULL) 
	{
		return _pVValue->size();
	}
#endif   
	if (_pVBoost != NULL)
	{
		return _pVBoost->size ();
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		return _pVHand->size ();
	}
#endif
	return 0;		// should never happen
}
");
            
            #line 1383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^ ");
            
            #line 1383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1383 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::default::get (int x, int y, int z)\r\n{\r\n#ifdef STRUCT\r\n\tif (_pVValue != NULL" +
                    ") \r\n\t{\r\n\t\tif ((size_t)x >= _pVValue->size() || (size_t)y >= (*_pVValue)[x].size(" +
                    ") || (size_t)z >= (*_pVValue)[x][y].size()) throw REFNEW RangeException ();\r\n\t\tQ" +
                    "uantLib::");
            
            #line 1389 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = (*_pVValue)[x][y][z];\r\n\t\treturn REFNEW C");
            
            #line 1390 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif    \r\n\tif (_pVBoost != NULL)\r\n\t{\r\n\t\tif ((size_t)x >= " +
                    "_pVBoost->size() || (size_t)y >= (*_pVBoost)[x].size() || (size_t)z >= (*_pVBoos" +
                    "t)[x][y].size()) throw REFNEW RangeException ();\r\n\t\tQuantLib::");
            
            #line 1396 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *(*_pVBoost)[x][y][z];\r\n\t\treturn REFNEW C");
            
            #line 1397 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#ifdef HANDLE\r\n\tif (_pVHand != NULL)\r\n\t{\r\n\t\tif ((size_t)x >" +
                    "= _pVHand->size() || (size_t)y >= (*_pVHand)[x].size() || (size_t)z >= (*_pVHand" +
                    ")[x][y].size()) throw REFNEW RangeException ();\r\n\t\tQuantLib::");
            
            #line 1403 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& native = *((*_pVHand)[x][y][z].currentLink ());\r\n\t\treturn REFNEW C");
            
            #line 1404 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (native, this);\r\n\t}\r\n#endif\r\n\treturn nullptr;\t\t// can never be the case\r\n}\r\nvoid" +
                    " ");
            
            #line 1409 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1409 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::default::set (int x, int y, int z, ");
            
            #line 1409 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1409 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^ value)
{
#ifdef STRUCT
	if (_pVValue != NULL)
	{
		if (_pVValue->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVValue->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVValue->push_back (std::vector<std::vector<QuantLib::");
            
            #line 1419 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>());\r\n\t\t}\r\n\t\tif ((*_pVValue)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVValue)[x" +
                    "].size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVValue)[x].push_" +
                    "back (std::vector<QuantLib::");
            
            #line 1425 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("> ());\r\n\t\t}\r\n\t\tif ((*_pVValue)[x][y].size() <= (size_t)z)\r\n\t\t{\r\n\t\t\tif ((*_pVValue" +
                    ")[x][y].size() < (size_t)z) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVValue)[x]" +
                    "[y].push_back (dynamic_cast<C");
            
            #line 1431 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetReference ());\r\n\t\t}\r\n        else\r\n        {\r\n            QuantLib:" +
                    ":");
            
            #line 1435 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("& c = (*_pVValue)[x][y][z];\r\n            c = dynamic_cast<C");
            
            #line 1436 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetReference ();
        }
	}
#endif    
	if (_pVBoost != NULL)
	{
		if (_pVBoost->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVBoost->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVBoost->push_back (std::vector<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1447 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>());\r\n\t\t}\r\n\t\tif ((*_pVBoost)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVBoost)[" +
                    "x].size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVBoost)[x].push" +
                    "_back (std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1453 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> ());\r\n\t\t}\r\n\t\tif ((*_pVBoost)[x][y].size() <= (size_t)z)\r\n\t\t{\r\n\t\t\tif ((*_pVBoos" +
                    "t)[x][y].size() < (size_t)z) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVBoost)[x" +
                    "][y].push_back (dynamic_cast<C");
            
            #line 1459 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ());\r\n\t\t}\r\n        else\r\n        {\r\n            boost::share" +
                    "d_ptr<QuantLib::");
            
            #line 1463 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVBoost)[x][y][z];\r\n            c = dynamic_cast<C");
            
            #line 1464 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(@"^>(value)->GetShared ();
        }
	}
#ifdef HANDLE
	if (_pVHand != NULL)
	{
		if (_pVHand->size() <= (size_t)x)
		{
			// can't happen because vectors are filled from List<> sequentially
			if (_pVBoost->size()-1 < (size_t)x) throw REFNEW RangeException ();

			_pVHand->push_back (std::vector<std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1475 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>());\r\n\t\t}\r\n\t\tif ((*_pVHand)[x].size() <= (size_t)y)\r\n\t\t{\r\n\t\t\tif ((*_pVHand)[x]" +
                    ".size() < (size_t)y) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVHand)[x].push_ba" +
                    "ck (std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1481 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">> ());\r\n\t\t}\r\n\t\tif ((*_pVHand)[x][y].size() <= (size_t)z)\r\n\t\t{\r\n\t\t\tif ((*_pVHand)" +
                    "[x][y].size() < (size_t)z) throw REFNEW RangeException ();\r\n\r\n\t\t\t(*_pVHand)[x][y" +
                    "].push_back (QuantLib::Handle<QuantLib::");
            
            #line 1487 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">());\r\n\t\t}\r\n\t\tQuantLib::Handle<QuantLib::");
            
            #line 1489 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& c = (*_pVHand)[x][y][z];\r\n\t\tboost::shared_ptr<QuantLib::");
            
            #line 1490 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">& b = static_cast<boost::shared_ptr<QuantLib::");
            
            #line 1490 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>(c.currentLink());\r\n\t\tb = dynamic_cast<C");
            
            #line 1491 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value)->GetShared ();\r\n\t}\r\n#endif\r\n}\r\nCephei::Core::Generic::ICoCell<");
            
            #line 1495 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1495 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ ");
            
            #line 1495 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1495 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::CItem::get (int x, int y, int z)\r\n{\r\n\treturn CellFactory::Instance->Create<" +
                    "");
            
            #line 1497 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1497 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^> (dynamic_cast<I");
            
            #line 1497 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(default[x,y,z]));\r\n}\r\nvoid ");
            
            #line 1499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::CItem::set (int x, int y, int z, Cephei::Core::Generic::ICoCell<");
            
            #line 1499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1499 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ value)\r\n{\r\n\tdefault[x,y,z] = safe_cast<I");
            
            #line 1501 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>(value->Value);\r\n}\r\n\r\n#ifdef STRUCT\r\nstd::vector<std::vector<std::vector<QuantL" +
                    "ib::");
            
            #line 1505 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>& ");
            
            #line 1505 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1505 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::GetReference ()\r\n{\r\n\t return *_pVValue;\r\n}\r\n#endif\r\n\r\nstd::vector<std::vect" +
                    "or<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>>& ");
            
            #line 1511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1511 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::GetShared ()\r\n{\r\n\treturn *_pVBoost;\r\n}\r\n\r\n#ifdef HANDLE\r\nstd::vector<std::v" +
                    "ector<std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1517 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>>& ");
            
            #line 1517 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1517 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::GetHandle ()\r\n{\r\n\treturn *_pVHand;\r\n}\r\n#endif\r\nbool ");
            
            #line 1522 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1522 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::PrepareFeature (NativeFeature feature)\r\n{\r\n\tswitch (feature)\r\n\t{\r\n#ifdef ST" +
                    "RUCT\r\n\t\tcase NativeFeature::Value :\r\n\t\t\tif (_pVValue == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVValu" +
                    "e = new std::vector<std::vector<std::vector<QuantLib::");
            
            #line 1530 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#endif            \r\n\t\tcase NativeFeat" +
                    "ure::shared_ptr :\r\n\t\t\tif (_pVBoost == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVBoost = new std::vecto" +
                    "r<std::vector<std::vector<boost::shared_ptr<QuantLib::");
            
            #line 1538 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#ifdef HANDLE\r\n\t\tcase NativeFeature:" +
                    ":Handle :\r\n\t\t\tif (_pVHand == NULL)\r\n\t\t\t{\r\n\t\t\t\t_pVHand = new std::vector<std::vec" +
                    "tor<std::vector<QuantLib::Handle<QuantLib::");
            
            #line 1546 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(">>>> ();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n#endif\r\n\t}\r\n\treturn false;\r\n}\r\nINati" +
                    "veMatrix<");
            
            #line 1554 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1554 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^ ");
            
            #line 1554 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1554 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::CreateMatrix () \r\n{\r\n\treturn REFNEW C");
            
            #line 1556 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix ();\r\n}\r\n\r\nINativeMatrix<Cephei::Core::Generic::ICoCell<");
            
            #line 1559 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1559 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^>^>^ ");
            
            #line 1559 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1559 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Cube::CreateCellMatrix () \r\n{\r\n\treturn REFNEW C");
            
            #line 1561 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("Matrix ();\r\n}\r\n");
            
            #line 1563 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

    }

            
            #line default
            #line hidden
            this.Write("/////////////////////////////////////////////////////////////////////////////////" +
                    "/////////////////////////////////////\r\n// Factory class\r\n\r\n");
            
            #line 1569 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
 
    if (!Context.CurrentClass.IsAbstract)
    {
        foreach (Method method in Context.CurrentClass.Methods)
        {
            if (method.Name == Context.CurrentClass.Name && Context.Included2 (method, true))
            {

            
            #line default
            #line hidden
            this.Write("    \r\n");
            
            #line 1577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.GetNamespace ("::")));
            
            #line default
            #line hidden
            this.Write("::I");
            
            #line 1577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("^ ");
            
            #line 1577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(NameSpace));
            
            #line default
            #line hidden
            this.Write("::C");
            
            #line 1577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write("_Factory::Create (");
            
            #line 1577 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamConstructor (true, "I", "^", "::")));
            
            #line default
            #line hidden
            this.Write(")\r\n{\r\n    return REFNEW C");
            
            #line 1579 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(Context.CurrentClass.Name));
            
            #line default
            #line hidden
            this.Write(" (");
            
            #line 1579 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"
            this.Write(this.ToStringHelper.ToStringWithCulture(method.GetParamConstructor (false, "", "^", "::")));
            
            #line default
            #line hidden
            this.Write(");\r\n}\r\n");
            
            #line 1581 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

            }
        }
    }
     
            
            #line default
            #line hidden
            return this.GenerationEnvironment.ToString();
        }
        
        #line 1586 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

		public Context Context = new Context();

		public Source
			( string ElementName
			, string RootPackageName
			, string ProjectName
			)
		{
			_ElementNameField = ElementName;
			_RootPackageNameField = RootPackageName;
			_ProjectNameField = ProjectName;
		}

        
        #line default
        #line hidden
        
        #line 1 "C:\Users\steve\Source\Repos\Cephei2\Cephei.Gen\QL.Impl\Source.tt"

private string _ElementNameField;

/// <summary>
/// Access the ElementName parameter of the template.
/// </summary>
private string ElementName
{
    get
    {
        return this._ElementNameField;
    }
}

private string _RootPackageNameField;

/// <summary>
/// Access the RootPackageName parameter of the template.
/// </summary>
private string RootPackageName
{
    get
    {
        return this._RootPackageNameField;
    }
}

private string _ProjectNameField;

/// <summary>
/// Access the ProjectName parameter of the template.
/// </summary>
private string ProjectName
{
    get
    {
        return this._ProjectNameField;
    }
}


/// <summary>
/// Initialize the template
/// </summary>
public virtual void Initialize()
{
    if ((this.Errors.HasErrors == false))
    {
bool ElementNameValueAcquired = false;
if (this.Session.ContainsKey("ElementName"))
{
    this._ElementNameField = ((string)(this.Session["ElementName"]));
    ElementNameValueAcquired = true;
}
if ((ElementNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ElementName");
    if ((data != null))
    {
        this._ElementNameField = ((string)(data));
    }
}
bool RootPackageNameValueAcquired = false;
if (this.Session.ContainsKey("RootPackageName"))
{
    this._RootPackageNameField = ((string)(this.Session["RootPackageName"]));
    RootPackageNameValueAcquired = true;
}
if ((RootPackageNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("RootPackageName");
    if ((data != null))
    {
        this._RootPackageNameField = ((string)(data));
    }
}
bool ProjectNameValueAcquired = false;
if (this.Session.ContainsKey("ProjectName"))
{
    this._ProjectNameField = ((string)(this.Session["ProjectName"]));
    ProjectNameValueAcquired = true;
}
if ((ProjectNameValueAcquired == false))
{
    object data = global::System.Runtime.Remoting.Messaging.CallContext.LogicalGetData("ProjectName");
    if ((data != null))
    {
        this._ProjectNameField = ((string)(data));
    }
}


    }
}


        
        #line default
        #line hidden
    }
    
    #line default
    #line hidden
    #region Base class
    /// <summary>
    /// Base class for this transformation
    /// </summary>
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.TextTemplating", "16.0.0.0")]
    public class SourceBase
    {
        #region Fields
        private global::System.Text.StringBuilder generationEnvironmentField;
        private global::System.CodeDom.Compiler.CompilerErrorCollection errorsField;
        private global::System.Collections.Generic.List<int> indentLengthsField;
        private string currentIndentField = "";
        private bool endsWithNewline;
        private global::System.Collections.Generic.IDictionary<string, object> sessionField;
        #endregion
        #region Properties
        /// <summary>
        /// The string builder that generation-time code is using to assemble generated output
        /// </summary>
        protected System.Text.StringBuilder GenerationEnvironment
        {
            get
            {
                if ((this.generationEnvironmentField == null))
                {
                    this.generationEnvironmentField = new global::System.Text.StringBuilder();
                }
                return this.generationEnvironmentField;
            }
            set
            {
                this.generationEnvironmentField = value;
            }
        }
        /// <summary>
        /// The error collection for the generation process
        /// </summary>
        public System.CodeDom.Compiler.CompilerErrorCollection Errors
        {
            get
            {
                if ((this.errorsField == null))
                {
                    this.errorsField = new global::System.CodeDom.Compiler.CompilerErrorCollection();
                }
                return this.errorsField;
            }
        }
        /// <summary>
        /// A list of the lengths of each indent that was added with PushIndent
        /// </summary>
        private System.Collections.Generic.List<int> indentLengths
        {
            get
            {
                if ((this.indentLengthsField == null))
                {
                    this.indentLengthsField = new global::System.Collections.Generic.List<int>();
                }
                return this.indentLengthsField;
            }
        }
        /// <summary>
        /// Gets the current indent we use when adding lines to the output
        /// </summary>
        public string CurrentIndent
        {
            get
            {
                return this.currentIndentField;
            }
        }
        /// <summary>
        /// Current transformation session
        /// </summary>
        public virtual global::System.Collections.Generic.IDictionary<string, object> Session
        {
            get
            {
                return this.sessionField;
            }
            set
            {
                this.sessionField = value;
            }
        }
        #endregion
        #region Transform-time helpers
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void Write(string textToAppend)
        {
            if (string.IsNullOrEmpty(textToAppend))
            {
                return;
            }
            // If we're starting off, or if the previous text ended with a newline,
            // we have to append the current indent first.
            if (((this.GenerationEnvironment.Length == 0) 
                        || this.endsWithNewline))
            {
                this.GenerationEnvironment.Append(this.currentIndentField);
                this.endsWithNewline = false;
            }
            // Check if the current text ends with a newline
            if (textToAppend.EndsWith(global::System.Environment.NewLine, global::System.StringComparison.CurrentCulture))
            {
                this.endsWithNewline = true;
            }
            // This is an optimization. If the current indent is "", then we don't have to do any
            // of the more complex stuff further down.
            if ((this.currentIndentField.Length == 0))
            {
                this.GenerationEnvironment.Append(textToAppend);
                return;
            }
            // Everywhere there is a newline in the text, add an indent after it
            textToAppend = textToAppend.Replace(global::System.Environment.NewLine, (global::System.Environment.NewLine + this.currentIndentField));
            // If the text ends with a newline, then we should strip off the indent added at the very end
            // because the appropriate indent will be added when the next time Write() is called
            if (this.endsWithNewline)
            {
                this.GenerationEnvironment.Append(textToAppend, 0, (textToAppend.Length - this.currentIndentField.Length));
            }
            else
            {
                this.GenerationEnvironment.Append(textToAppend);
            }
        }
        /// <summary>
        /// Write text directly into the generated output
        /// </summary>
        public void WriteLine(string textToAppend)
        {
            this.Write(textToAppend);
            this.GenerationEnvironment.AppendLine();
            this.endsWithNewline = true;
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void Write(string format, params object[] args)
        {
            this.Write(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Write formatted text directly into the generated output
        /// </summary>
        public void WriteLine(string format, params object[] args)
        {
            this.WriteLine(string.Format(global::System.Globalization.CultureInfo.CurrentCulture, format, args));
        }
        /// <summary>
        /// Raise an error
        /// </summary>
        public void Error(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Raise a warning
        /// </summary>
        public void Warning(string message)
        {
            System.CodeDom.Compiler.CompilerError error = new global::System.CodeDom.Compiler.CompilerError();
            error.ErrorText = message;
            error.IsWarning = true;
            this.Errors.Add(error);
        }
        /// <summary>
        /// Increase the indent
        /// </summary>
        public void PushIndent(string indent)
        {
            if ((indent == null))
            {
                throw new global::System.ArgumentNullException("indent");
            }
            this.currentIndentField = (this.currentIndentField + indent);
            this.indentLengths.Add(indent.Length);
        }
        /// <summary>
        /// Remove the last indent that was added with PushIndent
        /// </summary>
        public string PopIndent()
        {
            string returnValue = "";
            if ((this.indentLengths.Count > 0))
            {
                int indentLength = this.indentLengths[(this.indentLengths.Count - 1)];
                this.indentLengths.RemoveAt((this.indentLengths.Count - 1));
                if ((indentLength > 0))
                {
                    returnValue = this.currentIndentField.Substring((this.currentIndentField.Length - indentLength));
                    this.currentIndentField = this.currentIndentField.Remove((this.currentIndentField.Length - indentLength));
                }
            }
            return returnValue;
        }
        /// <summary>
        /// Remove any indentation
        /// </summary>
        public void ClearIndent()
        {
            this.indentLengths.Clear();
            this.currentIndentField = "";
        }
        #endregion
        #region ToString Helpers
        /// <summary>
        /// Utility class to produce culture-oriented representation of an object as a string.
        /// </summary>
        public class ToStringInstanceHelper
        {
            private System.IFormatProvider formatProviderField  = global::System.Globalization.CultureInfo.InvariantCulture;
            /// <summary>
            /// Gets or sets format provider to be used by ToStringWithCulture method.
            /// </summary>
            public System.IFormatProvider FormatProvider
            {
                get
                {
                    return this.formatProviderField ;
                }
                set
                {
                    if ((value != null))
                    {
                        this.formatProviderField  = value;
                    }
                }
            }
            /// <summary>
            /// This is called from the compile/run appdomain to convert objects within an expression block to a string
            /// </summary>
            public string ToStringWithCulture(object objectToConvert)
            {
                if ((objectToConvert == null))
                {
                    throw new global::System.ArgumentNullException("objectToConvert");
                }
                System.Type t = objectToConvert.GetType();
                System.Reflection.MethodInfo method = t.GetMethod("ToString", new System.Type[] {
                            typeof(System.IFormatProvider)});
                if ((method == null))
                {
                    return objectToConvert.ToString();
                }
                else
                {
                    return ((string)(method.Invoke(objectToConvert, new object[] {
                                this.formatProviderField })));
                }
            }
        }
        private ToStringInstanceHelper toStringHelperField = new ToStringInstanceHelper();
        /// <summary>
        /// Helper to produce culture-oriented representation of an object as a string
        /// </summary>
        public ToStringInstanceHelper ToStringHelper
        {
            get
            {
                return this.toStringHelperField;
            }
        }
        #endregion
    }
    #endregion
}
